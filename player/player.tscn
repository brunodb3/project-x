[gd_scene load_steps=10 format=3 uid="uid://dscyd0yhdb6v5"]

[ext_resource type="Script" path="res://player/player.gd" id="1_4ouhf"]
[ext_resource type="Material" uid="uid://cekydjlsg2uip" path="res://materials/light/regular.tres" id="1_30t72"]
[ext_resource type="Material" uid="uid://bd5m415gucvmm" path="res://materials/red/regular.tres" id="1_xw5gi"]
[ext_resource type="PackedScene" uid="uid://door44nhxqenx" path="res://weapons/pistol/pistol.tscn" id="4_cxbyb"]
[ext_resource type="Script" path="res://player/camera.gd" id="4_h83rw"]
[ext_resource type="PackedScene" uid="uid://dh8m23p5xb4b1" path="res://interface/crosshairs/crosshairs.tscn" id="5_c6x45"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_0cro0"]

[sub_resource type="TubeTrailMesh" id="TubeTrailMesh_30cd5"]
radius = 0.2
radial_steps = 16

[sub_resource type="CapsuleMesh" id="CapsuleMesh_7a1lj"]

[node name="Player" type="CharacterBody3D" node_paths=PackedStringArray("HorizontalPivot")]
collision_layer = 2
script = ExtResource("1_4ouhf")
HorizontalPivot = NodePath("HorizontalPivot")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
shape = SubResource("CapsuleShape3D_0cro0")

[node name="Skeleton" type="Node3D" parent="."]

[node name="Visor" type="MeshInstance3D" parent="Skeleton"]
transform = Transform3D(5.37115e-15, 6.93263e-09, -1.67134, 0.983115, -6.93263e-09, 0, -4.29733e-08, -0.1586, -7.30564e-08, 0, 1.5, -0.45)
layers = 2
material_override = ExtResource("1_30t72")
mesh = SubResource("TubeTrailMesh_30cd5")
skeleton = NodePath("")

[node name="Body" type="MeshInstance3D" parent="Skeleton"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
layers = 2
material_override = ExtResource("1_xw5gi")
mesh = SubResource("CapsuleMesh_7a1lj")
skeleton = NodePath("")

[node name="Hand" type="Marker3D" parent="Skeleton"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.521304, 1.12327, -0.430072)

[node name="Pistol" parent="Skeleton/Hand" instance=ExtResource("4_cxbyb")]

[node name="HorizontalPivot" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)

[node name="VerticalPivot" type="Node3D" parent="HorizontalPivot"]

[node name="SpringArm3D" type="SpringArm3D" parent="HorizontalPivot/VerticalPivot"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.3, 0.4, -0.7)
spring_length = 3.0
margin = 0.5

[node name="Camera3D" type="Camera3D" parent="HorizontalPivot/VerticalPivot/SpringArm3D" node_paths=PackedStringArray("Hand", "Skeleton", "VerticalPivot", "HorizontalPivot")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 3)
script = ExtResource("4_h83rw")
Hand = NodePath("../../../../Skeleton/Hand")
Skeleton = NodePath("../../../../Skeleton")
VerticalPivot = NodePath("../..")
HorizontalPivot = NodePath("../../..")

[node name="AimCast" type="RayCast3D" parent="HorizontalPivot/VerticalPivot/SpringArm3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 3)
target_position = Vector3(0, 0, -100)
collision_mask = 41

[node name="Crosshairs" parent="." instance=ExtResource("5_c6x45")]
mouse_filter = 2
